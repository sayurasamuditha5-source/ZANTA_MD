const _0x5a21=['prefix','DEFAULT_PREFIX','Fetch\x20Error:','botName','Settings','findOne','DEFAULT_OWNER_NAME','Update\x20Error\x20(','findOneAndUpdate','connectDB','ownerName','DEFAULT_BOT_NAME','MongoDB\x20Connected!','mongoose','../config','mongodb+srv://Zanta-MD:Akashkavindu12345@cluster0.y7xsqsi.mongodb.net/?appName=Cluster0','OWNER_NUMBER','create','MongoDB\x20Error:','getBotSettings','updateSetting'];(function(_0x2d3e11,_0x5a213e){const _0x4b4344=function(_0x1b4b1e){while(--_0x1b4b1e){_0x2d3e11['push'](_0x2d3e11['shift']());}};_0x4b4344(++_0x5a213e);}(_0x5a21,0x1b3));const _0x4b43=function(_0x2d3e11,_0x5a213e){_0x2d3e11=_0x2d3e11-0x0;let _0x4b4344=_0x5a21[_0x2d3e11];return _0x4b4344;};const mongoose=require(_0x4b43('0xd'));const config=require(_0x4b43('0xe'));const MONGO_URI=_0x4b43('0xf');const OWNER_KEY=config[_0x4b43('0x10')];const SettingsSchema=new mongoose['Schema']({'id':{'type':String,'default':OWNER_KEY,'unique':!![]},'botName':{'type':String,'default':config[_0x4b43('0xb')]},'ownerName':{'type':String,'default':config[_0x4b43('0x6')]},'prefix':{'type':String,'default':config[_0x4b43('0x1')]}});const Settings=mongoose['model'](_0x4b43('0x4'),SettingsSchema);let isConnected=![];async function connectDB(){if(isConnected)return;try{await mongoose['connect'](MONGO_URI,{'useNewUrlParser':!![],'useUnifiedTopology':!![]});isConnected=!![];console['log'](_0x4b43('0xc'));}catch(_0x3e1b1e){console['error'](_0x4b43('0x12'),_0x3e1b1e);}}async function getBotSettings(){if(!OWNER_KEY)return{'botName':config[_0x4b43('0xb')],'ownerName':config[_0x4b43('0x6')],'prefix':config[_0x4b43('0x1')]};try{let _0x442c5b=await Settings[_0x4b43('0x5')]({'id':OWNER_KEY});if(!_0x442c5b){_0x442c5b=await Settings[_0x4b43('0x11')]({'id':OWNER_KEY,'botName':config[_0x4b43('0xb')],'ownerName':config[_0x4b43('0x6')],'prefix':config[_0x4b43('0x1')]});}return{'botName':_0x442c5b[_0x4b43('0x3')],'ownerName':_0x442c5b[_0x4b43('0xa')],'prefix':_0x442c5b[_0x4b43('0x0')]};}catch(_0x228913){console['error']('[DB]\x20'+_0x4b43('0x2'),_0x228913);return{'botName':config[_0x4b43('0xb')],'ownerName':config[_0x4b43('0x6')],'prefix':config[_0x4b43('0x1')]};}}async function updateSetting(_0x38411e,_0x45b03e){if(!OWNER_KEY)return![];try{const _0x5075e6={[_0x38411e]:_0x45b03e};const _0x16b04e=await Settings[_0x4b43('0x8')]({'id':OWNER_KEY},{'$set':_0x5075e6},{'new':!![],'upsert':!![]});return!!_0x16b04e;}catch(_0x550d53){console['error']('[DB]\x20'+_0x4b43('0x7')+_0x38411e+'):',_0x550d53);return![];}}module.exports={'connectDB':connectDB,'getBotSettings':getBotSettings,'updateSetting':updateSetting};
